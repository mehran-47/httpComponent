#!/usr/bin/env python3
import os, psutil
if __name__ == '__main__':
    pid = None
    try:
        with open('/opt/SA_stats/pid','r') as pid_f: pid = int(pid_f.read())
        if pid:
            killList = [psutil.Process(pid)] + psutil.Process(pid).get_children()
            try:
                for pidToKill in killList: pidToKill.kill()
            except:
                print('process not found')
        os.remove('/opt/SA_stats/osaf_envs')
        os.remove('/opt/SA_stats/pid')
    except FileNotFoundError:
        print('"/opt/SA_stats/pid" or "/opt/SA_stats/osaf_envs" not found')